# GitHub分支保护规则

为了保证代码质量和遵循GitFlow分支策略，建议在GitHub仓库中配置以下分支保护规则。

## main分支保护

1. **启用"Require pull request reviews before merging"**
   - 需要至少1个审阅者批准
   - 拒绝陈旧的PR审阅
   - 要求代码所有者审阅

2. **启用"Require status checks to pass before merging"**
   - 要求分支在合并前保持最新状态
   - 必须通过的检查:
     - lint-and-test
     - build-and-push

3. **启用"Require conversation resolution before merging"**
   - 确保所有讨论都已解决后才能合并

4. **启用"Include administrators"**
   - 确保管理员也需要遵循保护规则

## develop分支保护

1. **启用"Require pull request reviews before merging"**
   - 需要至少1个审阅者批准

2. **启用"Require status checks to pass before merging"**
   - 要求分支在合并前保持最新状态
   - 必须通过的检查:
     - lint
     - test-backend
     - test-frontend
     - build

3. **启用"Require conversation resolution before merging"**
   - 确保所有讨论都已解决后才能合并

## 配置方法

1. 访问GitHub仓库
2. 点击 "Settings" 选项卡
3. 在侧边栏中选择 "Branches"
4. 在 "Branch protection rules" 部分点击 "Add rule"
5. 输入分支名称（如 main 或 develop）
6. 配置上述保护规则
7. 点击 "Create" 或 "Save changes"

## 标签保护

还建议为发布标签添加保护规则：

1. 访问 "Settings" > "Tags" > "Tag protection rules"
2. 点击 "New rule"
3. 输入标签模式: `v*.*.*`
4. 启用限制只有特定用户或团队可以创建匹配的标签
5. 保存规则 